
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
	<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>

	<style>
		* {
			font-family: '微软雅黑';
		}

		label {
			font-size: 15px;
			margin-right: 15px;
		}
	</style>
	<script type="application/javascript">
		var timeMap = new Map();
		var filedFormat = '	/** {0} */\r\n	private {1} {2};\r\n';
		var getCommentFormat = '	/**\r\n	 * {0}を取得する。<BR>\r\n	 * @return {1}\r\n	 */';
		var getFormat = '	public {0} get{1}() {\r\n		return {2};\r\n	}\r\n';
		var setCommentFormat = '	/**\r\n	 * {0}を設定する。<BR>\r\n	 * @param {1} {2}\r\n	 */';
		var setFormat = '	public void set{0}({1} {2}) {\r\n		this.{3} = {4};\r\n	}\r\n';

		var RGBMap = new Map();
		RGBMap.set('0', 0);
		RGBMap.set('1', 1);
		RGBMap.set('2', 2);
		RGBMap.set('3', 3);
		RGBMap.set('4', 4);
		RGBMap.set('5', 5);
		RGBMap.set('6', 6);
		RGBMap.set('7', 7);
		RGBMap.set('8', 8);
		RGBMap.set('9', 9);
		RGBMap.set('A', 10);
		RGBMap.set('B', 11);
		RGBMap.set('C', 12);
		RGBMap.set('D', 13);
		RGBMap.set('E', 14);
		RGBMap.set('F', 15);

		var RGBRvMap = new Map();
		RGBRvMap.set(0, '0');
		RGBRvMap.set(1, '1');
		RGBRvMap.set(2, '2');
		RGBRvMap.set(3, '3');
		RGBRvMap.set(4, '4');
		RGBRvMap.set(5, '5');
		RGBRvMap.set(6, '6');
		RGBRvMap.set(7, '7');
		RGBRvMap.set(8, '8');
		RGBRvMap.set(9, '9');
		RGBRvMap.set(10, 'A');
		RGBRvMap.set(11, 'B');
		RGBRvMap.set(12, 'C');
		RGBRvMap.set(13, 'D');
		RGBRvMap.set(14, 'E');
		RGBRvMap.set(15, 'F');

		$(function () {
			$('#startBtn').click(function () {
				var $RGBLetter = $('#RGBLetter');
				var $RGBNumberRed = $('#RGBNumberRed');
				var $RGBNumberGreen = $('#RGBNumberGreen');
				var $RGBNumberBlue = $('#RGBNumberBlue');
				if ($RGBLetter.val()) {
					var rgbLetter = $RGBLetter.val();
					if (rgbLetter.indexOf("#") >= 0) {
						rgbLetter = rgbLetter.replace('#', '').toUpperCase();
						if (rgbLetter.length != 6) {
							alert("RGB(#FFFFFF)格式不正确。");
						} else {
							var lR1 = rgbLetter.substring(0,1);
							var lR2 = rgbLetter.substring(1,2);
							var lG1 = rgbLetter.substring(2,3);
							var lG2 = rgbLetter.substring(3,4);
							var lB1 = rgbLetter.substring(4,5);
							var lB2 = rgbLetter.substring(5,6);
							$RGBNumberRed.val(RGBMap.get(lR1) * 16 + RGBMap.get(lR2));
							$RGBNumberGreen.val(RGBMap.get(lG1) * 16 + RGBMap.get(lG2));
							$RGBNumberBlue.val(RGBMap.get(lB1) * 16 + RGBMap.get(lB2));
						}
					}
				} else if ($RGBNumberRed.val() && $RGBNumberGreen.val() && $RGBNumberBlue.val()) {
					var lR = parseInt($RGBNumberRed.val());
					var lG = parseInt($RGBNumberGreen.val());
					var lB = parseInt($RGBNumberBlue.val());
					var rst = "#" + RGBRvMap.get((lR - lR % 16)/ 16) + RGBRvMap.get(lR % 16)
								+ RGBRvMap.get((lG - lG % 16)/ 16) + RGBRvMap.get(lG % 16)
								+ RGBRvMap.get((lB - lB % 16)/ 16) + RGBRvMap.get(lB % 16);
					$RGBLetter.val(rst);
				}
			});

			$('#cleanInputBtn').click(function () {
				$('#parseArea').val('');
				$('#outputArea').val('');
				$('#consoleArea').val('');
				$('#replacements').val('');
				$('#keywords').val('');
			});

			$('#cleanOutputBtn').click(function () {
				$('#outputArea').val('');
				$('#consoleArea').val('');
			});

			$('.removeBtn').click(function () {
				removeFiled($(this));
			});

			$('#commentLang').change(function(){
				loadCommentLang();
			});
		});

		function loadCommentLang() {
			var cmLg = $('#commentLang').val();
			if (cmLg === 'jp') {
				filedFormat = '	/** {0} */\r\n	private {1} {2};\r\n';
				getCommentFormat = '	/**\r\n	 * {0}を取得する。<BR>\r\n	 * @return {1}\r\n	 */';
				getFormat = '	public {0} get{1}() {\r\n		return {2};\r\n	}\r\n';
				setCommentFormat = '	/**\r\n	 * {0}を設定する。<BR>\r\n	 * @param {1} {2}\r\n	 */';
				setFormat = '	public void set{0}({1} {2}) {\r\n		this.{3} = {4};\r\n	}\r\n';
			} else if (cmLg === 'zh') {
				filedFormat = '	/** {0} */\r\n	private {1} {2};\r\n';
				getCommentFormat = '	/**\r\n	 * 获取{0}。<BR>\r\n	 * @return {1}\r\n	 */';
				getFormat = '	public {0} get{1}() {\r\n		return {2};\r\n	}\r\n';
				setCommentFormat = '	/**\r\n	 * 设定{0}。<BR>\r\n	 * @param {1} {2}\r\n	 */';
				setFormat = '	public void set{0}({1} {2}) {\r\n		this.{3} = {4};\r\n	}\r\n';
			} else if (cmLg === 'en') {
				filedFormat = '	/** {0} */\r\n	private {1} {2};\r\n';
				getCommentFormat = '	/**\r\n	 * Get {0}。<BR>\r\n	 * @return {1}\r\n	 */';
				getFormat = '	public {0} get{1}() {\r\n		return {2};\r\n	}\r\n';
				setCommentFormat = '	/**\r\n	 * Set {0}。<BR>\r\n	 * @param {1} {2}\r\n	 */';
				setFormat = '	public void set{0}({1} {2}) {\r\n		this.{3} = {4};\r\n	}\r\n';
			}
		}

		function doParseFiled() {
			var parseVal = $('#parseArea').val().trim();
			if (parseVal) {
				var arr = parseVal.split('\n');
				while (arr.length > $('.filedSet').length) {
					addFiled();
				}
				var filedSetList = $('.filedSet');
				$(arr).each(function (key, val) {
					var subArr = new Array();
					if (val.indexOf(',') > 0) {
						subArr = val.split(',');
					} else if (val.indexOf('\t') > 0) {
						subArr = val.split('\t');
					}
					var filedVal = subArr[0];
					var nameVal = subArr.length > 1 ? subArr[1] : subArr[0];
					var typeVal = subArr.length > 2 ? subArr[2] : 'String';
					$(filedSetList[key]).find('.filed').val(filedVal);
					$(filedSetList[key]).find('.name').val(nameVal);
					$(filedSetList[key]).find('.type').val(typeVal);
				});
			}
		}

		function removeFiled($target) {
			if ($('.filedSet').length == 1) {
				alert("最后一个不能删除！");
			} else {
				$target.parent().remove();
			}
		}

		function toCamel(filed) {
			var toCamelFlg = $('#toCamelCkb').prop("checked");
			var fWordDnFlg = $('#fWordDnCkb').prop("checked");
			if (toCamelFlg) {
				if (filed.indexOf("_") > 0) {
					var filedArr = filed.toLowerCase().split("_");
					var result = "";
					$(filedArr).each(function (key, val) {
						if (result.length > 0) {
							val = val.substring(0, 1).toUpperCase() + val.substring(1);
						}
						result = result + val;
					});
					return result;
				} else {
					return filed.toLowerCase();
				}
			}
			if (fWordDnFlg) {
				filed = filed.substring(0, 1).toLowerCase() + filed.substring(1);
			}
			return filed;
		}

		function addFiled() {
			var $tmp = $('.filedSet:first').clone();
			$tmp.find('input').val('');
			$tmp.find('select').val('String');
			$tmp.find('.removeBtn').click(function () {
				removeFiled($(this));
			});
			$('#filedContents').append($tmp);
		}

		function errorLog(msg) {
			log('ERROR', msg);
			$('#consoleArea').focus();
		}

		function warnLog(msg) {
			log('WARN ', msg);
		}

		function startLog(msg) {
			startTime(msg);
			infoLog($.sprintf('{0}处理开始！', msg));
		}

		function endLog(msg) {
			var time = endTime(msg);
			infoLog($.sprintf('{0}处理结束！共耗时：{1}ms', msg, time));
		}

		function infoLog(msg) {
			log('INFO ', msg);
		}

		function debugLog(msg) {
			log('DEBUG', msg);
		}

		function log(level, msg) {
			var date = (new Date()).Format("yyyy-MM-dd HH:mm:ss.S");
			msg = $.sprintf('[{0}] [{1}] {2}\r\n', level, date, msg);
			var logContent = $('#consoleArea').val();
			if (logContent) {
				msg = logContent + msg;
			}
			$('#consoleArea').val(msg);
		}

		function startTime(key) {
			timeMap.set(key, new Date().getTime());
		}

		function endTime(key) {
			if (timeMap.get(key)) {
				var time = new Date().getTime();
				return time - timeMap.get(key);
			} else {
				warnLog(key + ' not started.');
				return 0;
			}
		}

		$.extend({
			sprintf: function (format) {
				for (var i = 1; i < arguments.length; i++) {
					var reg = new RegExp('\\{' + (i - 1) + '\\}', 'g');
					format = format.replace(reg, arguments[i]);
				}
				return format;
			}
		});

		// 对Date的扩展，将 Date 转化为指定格式的String   
		// 月(M)、日(d)、小时(H)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符，   
		// 年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字)   
		// 例子：   
		// (new Date()).Format("yyyy-MM-dd HH:mm:ss.S") ==> 2006-07-02 08:09:04.423   
		// (new Date()).Format("yyyy-M-d H:m:s.S")      ==> 2006-7-2 8:9:4.18   
		Date.prototype.Format = function (fmt) { //author: meizz   
			var o = {
				"M+": this.getMonth() + 1,               //月份   
				"d+": this.getDate(),                    //日   
				"H+": this.getHours(),                   //小时   
				"m+": this.getMinutes(),                 //分   
				"s+": this.getSeconds(),                 //秒   
				"q+": Math.floor((this.getMonth() + 3) / 3), //季度   
				"S": this.getMilliseconds()             //毫秒   
			};
			if (/(y+)/.test(fmt))
				fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
			for (var k in o)
				if (new RegExp("(" + k + ")").test(fmt))
					fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
			return fmt;
		}
	</script>
</head>

<body>
	<div style="margin: auto; width: 1050px;">
		<div style="display: inline-block; width: 820px;">
			<div style="display: inline-block; width: 400px;">
				<div style="padding: 5px;">RGB(#FFFFFF):</div>
				<input id="RGBLetter" type="text" style="width:398px;height: 40px;"/>
			</div>
			<div style="display: inline-block; width: 400px;">
				<div style="padding: 5px;">RGB(rgb(255,255,255)):</div>
				rgb(<input id="RGBNumberRed" type="text" style="width:50px;height: 40px;"/>&nbsp;,&nbsp;<input id="RGBNumberGreen" type="text" style="width:50px;height: 40px;"/>&nbsp;,&nbsp;<input id="RGBNumberBlue" type="text" style="width:50px;height: 40px;"/>)
			</div>
		</div>
		<br />
		<fieldset style="width: 771px;">
			<legend>操作</legend>
			<button id="startBtn">开始转换</button>
			<button id="cleanInputBtn">重置页面</button>
			<button id="cleanOutputBtn">清空结果</button>
		</fieldset>
		
		<br />
		Console:<br />
		<textarea id="consoleArea" rows="15" style="width:800px"></textarea>
	</div>
</body>

</html>
